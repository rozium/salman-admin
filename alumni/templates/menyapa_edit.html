{% extends "base.html" %}

{% block title %}Edit{% endblock %}

{% block style %}
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
<link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.css" rel="stylesheet">
<style type="text/css">
    div#content {
        margin: auto;
        padding-top: 20px;
        width: 95%;
    }

    body {
        background-color: #f1f1f1 !important ;
    }

    a, a:active, a:focus, a:hover {
        text-decoration: none !important;
    }

    h1 {
        font-size: 24px;
    }
</style>
{% endblock %}

{% block content %}
<!-- <div style="font-family: Roboto-Black; color: #795547; padding-bottom: 10px;">
    <h1><i class="fas fa-edit"></i><span contenteditable="True" id="judul" spellcheck="false">{{ article.judul }}</span><h1>
    <button type="submit" class="buttonLogin" id="save" style="padding: 6px 8px; font-size: 16px; margin-top: -30px; font-family: Roboto-Black;"><span>Save </span></button>
</div>
<div id="summernote"></div> -->
<form id="summernoteForm" method="post" action="{% url 'menyapaEditSave' %}" class="form-horizontal" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="hidden" name="id" value="{{ article.id }}">
    <div class="form-group">
        <label class="col-xs-1 control-label" style="font-size: 18px;">Judul</label>
        <div class="col-xs-8">
            <input type="text" class="form-control" name="title" autofocus id="judul" value="{{ article.judul }}" style="border: 1px solid #888; padding: 12px 8px;" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-xs-1 control-label" style="font-size: 18px;">Konten</label>
        <div class="col-xs-11">
            <textarea class="form-control" name="content" id="summernote"></textarea>
        </div>
    </div>

    <div class="form-group">
        <label class="col-xs-1" style="font-size: 18px;">Thumbnail</label>
        <div class="col-xs-3">
            <input type="file" name="thumbnail" accept="image/*">
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-1 col-xs-offset-1" style="float: right; margin-top: -20px;">
            <button type="submit" class="buttonLogin" id="save" style="padding: 6px 8px; font-size: 16px; margin-top: 0px; font-family: Roboto-Black;"><span>Save </span></button>
        </div>
    </div>
</form>

{% endblock %}
    
{% block script %}
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>

<!-- include summernote css/js-->
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.js"></script>

<script type="text/javascript">
    $(document).ready(function() {

        var content_id = 'judul';  

        max = 80;

        //binding keyup/down events on the contenteditable div
        $('#'+content_id).keyup(function(e){ check_charcount(content_id, max, e); });
        $('#'+content_id).keydown(function(e){ check_charcount(content_id, max, e); });

        function check_charcount(content_id, max, e)
        {   
            if(e.which != 8 && $('#'+content_id).text().length > max)
            {
               // $('#'+content_id).text($('#'+content_id).text().substring(0, max));
               e.preventDefault();
            }
        }

        // init summernote
        $('#summernote').summernote({
            toolbar: [
                // [groupName, [list of button]]
                ['style', ['style']],
                ['style', ['bold', 'italic', 'underline', 'superscript', 'subscript', 'strikethrough', 'clear']],
                ['style', ['fontname', 'fontsize', 'color']],
                ['para', ['ul', 'ol', 'paragraph', 'height']],
                ['insert', ['link', 'picture', 'table', 'hr']],
                ['misc', ['codeview']],
            ],
            minHeight: 200,
        });

        $('#summernote').summernote('code', '{{ article.konten|safe }}');

    });
</script>
{% endblock %}
