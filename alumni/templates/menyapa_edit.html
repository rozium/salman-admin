{% extends "base.html" %}

{% block title %}Edit{% endblock %}

{% block style %}
<link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
<link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.css" rel="stylesheet">
<style type="text/css">
    div#content {
        margin: auto;
        padding-top: 20px;
        width: 95%;
    }

    body {
        background-color: #f1f1f1 !important ;
    }

    a, a:active, a:focus, a:hover {
        text-decoration: none !important;
    }

    h1 {
        font-size: 24px;
    }
</style>
{% endblock %}

{% block content %}
<!-- <div style="font-family: Roboto-Black; color: #795547; padding-bottom: 10px;">
    <h1><i class="fas fa-edit"></i><span contenteditable="True" id="judul" spellcheck="false">{{ article.judul }}</span><h1>
    <button type="submit" class="buttonLogin" id="save" style="padding: 6px 8px; font-size: 16px; margin-top: -30px; font-family: Roboto-Black;"><span>Save </span></button>
</div>
<div id="summernote"></div> -->
<form id="summernoteForm" method="post" class="form-horizontal">
    {% csrf_token %}
    <div class="form-group">
        <label class="col-xs-1 control-label">Post title</label>
        <div class="col-xs-8">
            <input type="text" class="form-control" name="title" value="{{ article.judul }}" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-xs-1 control-label">Post content</label>
        <div class="col-xs-11">
            <textarea class="form-control" name="content" style="height: 400px;"></textarea>
        </div>
    </div>

    <div class="form-group">
        <div class="col-xs-1 col-xs-offset-1" style="float: right;">
            <button type="submit" class="buttonLogin" id="save" style="padding: 6px 8px; font-size: 16px; margin-top: 0px; font-family: Roboto-Black;"><span>Save </span></button>
        </div>
    </div>
</form>

{% endblock %}
    
{% block script %}
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>

<!-- include summernote css/js-->
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.2/summernote.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $('#summernoteForm')
        .formValidation({
            framework: 'bootstrap',
            excluded: [':disabled'],
            icon: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                title: {
                    validators: {
                        notEmpty: {
                            message: 'The title is required and cannot be empty'
                        }
                    }
                },
                content: {
                    validators: {
                        callback: {
                            message: 'The content is required and cannot be empty',
                            callback: function(value, validator, $field) {
                                var code = $('[name="content"]').summernote('code');
                                // <p><br></p> is code generated by Summernote for empty content
                                return (code !== '' && code !== '<p><br></p>');
                            }
                        }
                    }
                }
            }
        })
        .find('[name="content"]')
            .summernote({
                height: 400
            })
            .on('summernote.change', function(customEvent, contents, $editable) {
                // Revalidate the content when its value is changed by Summernote
                $('#summernoteForm').formValidation('revalidateField', 'content');
            })
            .end();
});
</script>

<!-- <script type="text/javascript">
    $(document).ready(function() {

        var content_id = 'judul';  

        max = 80;

        //binding keyup/down events on the contenteditable div
        $('#'+content_id).keyup(function(e){ check_charcount(content_id, max, e); });
        $('#'+content_id).keydown(function(e){ check_charcount(content_id, max, e); });

        function check_charcount(content_id, max, e)
        {   
            if(e.which != 8 && $('#'+content_id).text().length > max)
            {
               // $('#'+content_id).text($('#'+content_id).text().substring(0, max));
               e.preventDefault();
            }
        }

        // init summernote
        $('#summernote').summernote({
            toolbar: [
                // [groupName, [list of button]]
                ['style', ['style']],
                ['style', ['bold', 'italic', 'underline', 'superscript', 'subscript', 'strikethrough', 'clear']],
                ['style', ['fontname', 'fontsize', 'color']],
                ['para', ['ul', 'ol', 'paragraph', 'height']],
                ['insert', ['link', 'picture', 'table', 'hr']],
        ['misc', ['codeview']],
            ],
            minHeight: 200,
            focus: true
        });

        $('#summernote').summernote('code', '{{ article.konten|safe }}');

    });
</script> -->
{% endblock %}
